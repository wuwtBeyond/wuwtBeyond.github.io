https://juejin.cn/post/6844904014526545934

flink vs spark streaming 对比？
Flink 是标准的实时处理引擎，基于事件驱动。而 Spark Streaming 是微批（Micro-Batch）的模型

架构不同
flink的角色有jobmanager/taskmanager/slot，同时flink根据用户用户提交的代码生成streamgraph，进过优化
生成jobgraph，jobgraph也是flink ui所看到的拓扑图，jobmanager会根据jobgraph生成execution graph，
execution graph是最核心的数据结构，job manager会根据execution graph调度任务

时间机制
flink支持多种时间类型，包括处理时间、进入时间、事件时间，同时支持watermark处理滞后数据

flink集群角色和作用是什么？
jobmanager: 集群中的master，负责接收job、协调检查点、故障恢复等，同时管理flink节点taskmanager
taskmanager: 实际干活的，每个taskmanager负责管理其所在节点的资源信息，如内存、磁盘、网络，在启动的时候向jobmanager汇报
client: flink提交程序的客户端，当提交一个flink程序时，首先创建一个client，该client首先对代码进行预处理，然后提交给jobmanager

flink ha机制是什么?
standalone模式：依赖zk实现ha
在 Zookeeper 的帮助下，一个 Standalone 的 Flink 集群会同时有多个活着的 JobManager，其中只有一个处于工作状态，其他处于 Standby 状态。
当工作中的 JobManager 失去连接后（如宕机或 Crash），Zookeeper 会从 Standby 中选举新的 JobManager 来接管 Flink 集群。
yarn cluster模式：
依靠 Yarn 本身来对 JobManager 做 HA，完全依靠着 Yarn 中的 ResourceManager实现故障恢复。

介绍一下fink的slot，它的作用是什么？
taskmanager是实际负责计算的worker，taskmanager是一个jvm进程，并会以独立的线程来执行一个task或多个subtask。
为了控制一个taskmanager能接收线程的最大数量，flink提出slot的概念来作限制。slot会均分jvm的内存，避免不同slot的线程任务相互竞争内存资源，实现内存隔离，但不会实现cpu隔离。

flink的槽slot和并行度parallelism有什么关系？
flink程序最大并行度等于slot的最大可用数量，即taskmanager的数量乘以每个taskmanager上slot的数量

谈下项目中使用的flink常用算子及上下游算子间的分区策略？
分区策略是指一条数据如何从上游算子发给下游算子，flink默认实现8种分区策略，在flink ui上也可以看到
注意：flink改变并行度，默认是reblance的分区策略，这种可能会带来数据乱序执行的问题，线上环境出过类似问题，印象深刻

globalpartitioner: 数据会被分发到下游算子的第一个实例执行
shufflepartitioner: 数据会被随机分发下游算子的一个实例中执行
reblancepartitioner: 数据会被循环发送到下游的每一个算子执行
rescalepartitioner: 根据上下游算子的并行度，循环输出到下游算子
broadcastpartitioner: 广播方式发往下游每个算子
forwardpartitioner: 数据会被分发到下游本地算子执行，要求上下游算子并行度一致
keygroupstreampartitioner: 将数据按key的hash值发往下游算子执行
custompartitionerwrapper: 自定义分区器，实现partitioner接口 

map/flatmap/filter/keyby/window/union

说下flink生产环境遇到的问题以及如何解决的？
