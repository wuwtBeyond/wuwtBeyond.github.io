

http协议属于应用层协议，传输层使用tcp协议，网络层使用ip协议。

ip协议解决网络路由、寻址问题，tcp协议解决如何在ip层之上可靠地传递数据包，使在网络的另一端收到发端发出的所有包，并且顺序与发出顺序一致，tcp有可靠、面向连接的特点。


http是无状态的，指的是协议对于事务处理没有记忆能力，举例来说打开一个网页和之前打开这个网页之间没关系。

http是一个无状态的面向连接的协议，无状态不代表http不能保持tcp连接，更不能代表http使用的是udp协议。


http/1.0默认使用短连接，短连接是指每一次客户端和服务端的交互，就建立一次连接，交互结束，连接就会中断。
http/1.1默认使用长连接，用以保持连接特性。使用长连接的http协议，会在响应头加入这行配置。
Connection:keep-alive
在使用长连接的情况下，当一个网页打开完成后，客户端和服务器之间用于传输http数据的tcp连接不会关闭，如果客户端再次访问这个服务器上的网页，会继续使用这一条
已经建立的连接。keep-alive不会永久保持连接，会有一个保持时间。实现长连接需要客户端和服务端都支持。

tcp短连接
client向server发起连接请求，server接到请求，双方建立连接。client向server发送消息，server回应client，一次读写就完成了。这时候双方任何一个都
可以发起close操作，不过一般都是由client发起close请求。一般server不会回复完client立即关闭连接，也就是说短连接一般只会在client/server传递一次读写操作。

短连接优点：管理简单，存在的连接都是有效连接,不需要额外控制手段

tcp长连接
client向server发起连接请求，双方建立连接。client与server完成一次读写之后，连接不会被主动关闭，后续的读写操作会继续使用这个连接。
tcp保活功能，保活功能主要为服务器应用提供，在服务器端检测这种半开放的连接，如果客户端已经消失，将关闭这种连接。


长连接可以省去频繁建立和关闭连接的操作，对于频繁请求的客户端，适合长连接，不过长连接的一个问题是保活探测太长，随着客户端连接越来越多，服务端压力会越来越大，
甚至恶意连接。解决这个问题需要服务端采取一些策略，如关闭一些长时间没有读写时间的连接、以客户端ip为维度限制连接数量


长连接多用于操作频繁、点对点的通讯，而且连接数不能太多，例如数据库的连接

短连接适合并发量大、每个客户端无需频繁操作的场景，web网站的http服务一般使用短连接，因为成千上万的客户端如果用长连接，服务端扛不住这么大的连接量。


https建立连接过程：
客户端请求服务端，服务端使用非对称加密算法生成公钥和私钥，返回证书和公钥，实现秘钥交换。
客户端随机生成对称秘钥，用公钥加密秘钥，用秘钥加密传输信息，传输给服务端
服务端用私钥解密秘钥，用秘钥解密传输信息，获取到信息。

为什么不直接用公钥和私钥加解密信息？ 非对称加密比较耗时





